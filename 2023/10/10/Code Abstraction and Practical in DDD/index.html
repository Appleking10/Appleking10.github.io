

<!DOCTYPE html>
<html lang="en,zh-cn,default" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="é‡‘ä¾å¦®">
  <meta name="keywords" content="">
  
    <meta name="description" content="Code Abstraction and Practical in DDD#ä¸ªäºº&#x2F;åšå®¢ç›¸å…³ Introduction Backgroundï¼šIn the complex business system of the supply chain, the front-end development work in the Retail team primarily involved creating">
<meta property="og:type" content="article">
<meta property="og:title" content="Code Abstraction and Practical in DDD">
<meta property="og:url" content="https://appleking10.github.io/2023/10/10/Code%20Abstraction%20and%20Practical%20in%20DDD/index.html">
<meta property="og:site_name" content="ä¸€ä¸ªä¸æˆç†Ÿçš„å‰ç«¯åšå®¢">
<meta property="og:description" content="Code Abstraction and Practical in DDD#ä¸ªäºº&#x2F;åšå®¢ç›¸å…³ Introduction Backgroundï¼šIn the complex business system of the supply chain, the front-end development work in the Retail team primarily involved creating">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://appleking10.github.io/img/ddd/bll%E4%B8%BB%E8%A6%81%E4%BB%A3%E7%A0%81%E9%AA%A8%E6%9E%B6.png">
<meta property="og:image" content="https://appleking10.github.io/img/ddd/bll%E4%B8%BB%E8%A6%81%E4%BB%A3%E7%A0%81%E9%AA%A8%E6%9E%B6.png">
<meta property="og:image" content="https://appleking10.github.io/img/ddd/%E5%85%B7%E4%BD%93%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF%E5%A4%84%E7%90%86.png">
<meta property="og:image" content="https://appleking10.github.io/img/ddd/%E5%9C%A8%E8%A7%86%E5%9B%BE%E5%B1%82%E8%B0%83%E7%94%A8bll.png">
<meta property="article:published_time" content="2023-10-10T15:43:07.000Z">
<meta property="article:modified_time" content="2024-03-03T08:45:37.921Z">
<meta property="article:author" content="é‡‘ä¾å¦®">
<meta property="article:tag" content="DDD">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://appleking10.github.io/img/ddd/bll%E4%B8%BB%E8%A6%81%E4%BB%A3%E7%A0%81%E9%AA%A8%E6%9E%B6.png">
  
  
  
  <title>Code Abstraction and Practical in DDD - ä¸€ä¸ªä¸æˆç†Ÿçš„å‰ç«¯åšå®¢</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"appleking10.github.io","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 4.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>ä¸€ä¸ªä¸æˆç†Ÿçš„å‰ç«¯åšå®¢</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Code Abstraction and Practical in DDD"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-10-10 23:43" pubdate>
          October 10, 2023 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          3.9k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          33 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Code Abstraction and Practical in DDD</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Code-Abstraction-and-Practical-in-DDD"><a href="#Code-Abstraction-and-Practical-in-DDD" class="headerlink" title="Code Abstraction and Practical in DDD"></a><strong>Code Abstraction and Practical in DDD</strong></h1><p>#ä¸ªäºº/åšå®¢ç›¸å…³</p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><ul>
<li>Backgroundï¼šIn the complex business system of the supply chain, the front-end development work in the Retail team primarily involved creating single-page applications with <strong>simple interactions but complex business logic.</strong> Over time, as functionality accumulated, the team faced the following challenges:<ul>
<li>Dispersed logic, making it difficult to streamline</li>
<li>Increasing complexity of business scenarios leading to <strong>more quality issues</strong>, even challenging test coverage.</li>
<li><strong>Fear of making code changes</strong> due to the risk of unintended consequences.</li>
<li><strong>Difficulty migrating business components</strong> from Element-UI to SSC-UI when switching component libraries, often requiring a complete rewrite</li>
</ul>
</li>
</ul>
<ul>
<li>Personal Thinkingï¼š<ul>
<li>Is solving the problem of data-driven interfaces enough, or should I consider preliminary ~<a href="https://confluence.shopee.io/pages/viewpage.action?pageId=914821098" target="_blank" rel="noopener">research and planning related to Domain-Driven Design (DDD)</a></li>
<li>In such a complex system, how can I effectively understand the business logic behind each technical detail to ensure <strong>accurate business implementation</strong>?<h2 id="Research-and-Analysis"><a href="#Research-and-Analysis" class="headerlink" title="Research and Analysis"></a>Research and Analysis</h2></li>
</ul>
</li>
<li>What Kind of Code Design/Architecture Is More Suitable for the Current Business System</li>
<li><strong>Mainstream Architecture Design for Frontend and Backend</strong><ul>
<li>Backend Architecture (java: j2ee, spring boot, spring cloud, SOA, microservices, DDD, DCI)</li>
<li>Frontend Architecture (vue, react, vuex/redux, router, flux, micro frontends, BFF)â €<br>DDD (Domain-Driven Design) is an approach that starts from real business needs, focusing on solving domain problems when thinking and designing systems.<br>From the practice of backend development based on DDD, the advantages include: i<strong>t can help teams establish effective business communication standards and solidify the process of business logic.</strong></li>
</ul>
</li>
</ul>
<p><strong>So, does frontend need DDD? Can frontend implement DDD?</strong></p>
<h2 id="Do-we-need-drive-layering-in-Front-End"><a href="#Do-we-need-drive-layering-in-Front-End" class="headerlink" title="Do we need drive layering in Front-End?"></a>Do we need drive layering in Front-End?</h2><p>The drawbacks of mainstream frontend frameworksâ€™ convenient development:<br>MVVC application frameworks primarily address frontend view-level issues, solving how to automatically update based on DOM elements in a data-driven model.</p>
<p>This creates a problem: developers find it challenging to perceive when business data changes and what triggers those changes. When reading the code, youâ€™ll notice frequent jumps between the view layer and business logic layer, requiring constant context switching, <strong>which adds more complexity to understanding the business logic for frontend development.</strong></p>
<h2 id="How-to-Implement"><a href="#How-to-Implement" class="headerlink" title="How to Implement?"></a>How to Implement?</h2><p>As a frontend developer in a business system, there are several aspects to focus on:</p>
<ul>
<li>Business Models (including conditions for page display and workflow control)</li>
<li>Data Services</li>
<li>UI Interaction Component System<br>The scope of concern for frontend should be broader than that of the backend.</li>
<li><em>When it comes to implementing Domain-Driven Design (DDD) in the frontend, it cannot simply mimic backend practices. Frontend cannot separate itself from interactions to discuss business models.*</em></li>
</ul>
<h2 id="Frontend-Layered-Design"><a href="#Frontend-Layered-Design" class="headerlink" title="Frontend Layered Design"></a>Frontend Layered Design</h2><p>![The Design of Business Logic Layer](/img/ddd/The Design of Business Logic Layer.png)</p>
<h3 id="Directory-Structure-for-Code"><a href="#Directory-Structure-for-Code" class="headerlink" title="Directory Structure for Code"></a>Directory Structure for Code</h3><ul>
<li><p><strong>view layout</strong></p>
</li>
<li><p><em>ğŸ“ components*</em></p>
</li>
<li><p><em>ğŸ“ pages*</em></p>
</li>
<li><p><strong>business logic layout</strong></p>
</li>
<li><p><em>ğŸ“ƒ index: Entry File*</em></p>
</li>
<li><p><em>ğŸ“ constants*</em></p>
</li>
<li><p><em>ğŸ“ actionsï¼šBusiness Use Cases*</em></p>
</li>
<li><p><em>ğŸ“ schemasï¼šBusiness Use Feilds*</em></p>
</li>
<li><p><em>ğŸ“ utils*</em></p>
</li>
<li><p>Data Access Layer (DAL): Interface for data storage, including various data sources such as local, code, and backend.</p>
</li>
<li><p>Business Logic Layer (BLL): Implements business models and interactions, delivering outputs based on specific scenarios.</p>
</li>
<li><p>Controller: Connects BLL and pages, configures access routes.</p>
</li>
<li><p>Pages: View Page, overseeing all internal components.</p>
</li>
<li><p>Common: Primarily includes utils and components without business logic</p>
<h3 id="The-Design-of-Business-Logic-Layer"><a href="#The-Design-of-Business-Logic-Layer" class="headerlink" title="The Design of Business Logic Layer"></a>The Design of Business Logic Layer</h3><p><img src="/img/ddd/bll%E4%B8%BB%E8%A6%81%E4%BB%A3%E7%A0%81%E9%AA%A8%E6%9E%B6.png" srcset="/img/loading.gif" lazyload alt="bllä¸»è¦ä»£ç éª¨æ¶"></p>
</li>
<li><p><em>Structure of bllï¼š*</em><br>Storeï¼š Business Data<br>Schemaï¼š Business Field<br>eventTypesï¼šAction Type<br>actionsï¼š Business Action Logic</p>
</li>
<li><p><em>Method of bllï¼š*</em><br>$options: Basic Attrs passed from View<br>$on: Register an event<br>$emit: Trigger an event<br>updateSchemaï¼šUpdate Field<br>updateStoreï¼š Update Store data</p>
</li>
</ul>
<p><img src="/img/ddd/bll%E4%B8%BB%E8%A6%81%E4%BB%A3%E7%A0%81%E9%AA%A8%E6%9E%B6.png" srcset="/img/loading.gif" lazyload alt="bllä¸»è¦ä»£ç éª¨æ¶"><br><img src="/img/ddd/%E5%85%B7%E4%BD%93%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF%E5%A4%84%E7%90%86.png" srcset="/img/loading.gif" lazyload alt="å…·ä½“ä¸šåŠ¡åœºæ™¯å¤„ç†"><br><img src="/img/ddd/%E5%9C%A8%E8%A7%86%E5%9B%BE%E5%B1%82%E8%B0%83%E7%94%A8bll.png" srcset="/img/loading.gif" lazyload alt="åœ¨è§†å›¾å±‚è°ƒç”¨bll"></p>
<h2 id="Elaborating-on-Considerations-Implementation-Effort"><a href="#Elaborating-on-Considerations-Implementation-Effort" class="headerlink" title="Elaborating on Considerations - Implementation Effort"></a>Elaborating on Considerations - Implementation Effort</h2><ul>
<li><strong>The initial and learning costs are relatively high, and under the premise of frequent changes in the business architecture, the time cost of taking over does not proportionally align with the constraints imposed for benefits.</strong></li>
<li>The design of BLL (Business Logic Layer) primarily serves the development of complex business system types, while lightweight single-page solutions actually increase development costs.</li>
<li>DDD (Domain-Driven Design) is a methodology with the aim of achieving domain cohesion, and its core lies in how to better serve specific business scenarios.</li>
</ul>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/DDD/" class="print-no-link">#DDD</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Code Abstraction and Practical in DDD</div>
      <div>https://appleking10.github.io/2023/10/10/Code Abstraction and Practical in DDD/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>é‡‘ä¾å¦®</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>October 10, 2023</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/10/10/%E5%85%B3%E4%BA%8EDDD%E7%9A%84%E5%89%8D%E6%9C%9F%E8%B0%83%E7%A0%94%E5%92%8C%E8%AE%BE%E6%83%B3/" title="å…³äºDDDçš„å‰æœŸè°ƒç ”å’Œè®¾æƒ³">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">å…³äºDDDçš„å‰æœŸè°ƒç ”å’Œè®¾æƒ³</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/03/26/Vue%E6%8F%92%E4%BB%B6-%E8%B6%85%E9%95%BF%E5%8D%95%E5%92%8C%E5%88%86%E7%BA%A7%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93%E4%BC%98%E5%8C%96/" title="Vueæ’ä»¶--è¶…é•¿å•å’Œåˆ†çº§åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–">
                        <span class="hidden-mobile">Vueæ’ä»¶--è¶…é•¿å•å’Œåˆ†çº§åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
